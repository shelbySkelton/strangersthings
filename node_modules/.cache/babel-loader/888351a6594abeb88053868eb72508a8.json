{"ast":null,"code":"import _regeneratorRuntime from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link,Navigate}from'react-router-dom';import{getMe,deletePost}from'../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var token=_ref.token,setToken=_ref.setToken,isLoggedIn=_ref.isLoggedIn,currentUser=_ref.currentUser,username=_ref.username;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),myPosts=_useState2[0],setMyPosts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),myMessages=_useState4[0],setMyMessages=_useState4[1];useEffect(function(){var getMyProfile=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userObject;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getMe(JSON.parse(localStorage.token));case 2:userObject=_context.sent;setMyPosts(userObject.data.posts);setMyMessages(userObject.data.messages);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getMyProfile(){return _ref2.apply(this,arguments);};}();getMyProfile();console.log(\"isLoggedin:\",isLoggedIn);},[isLoggedIn,setMyPosts]);return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:!isLoggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/log-in/\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{id:\"welcome\",children:[\"Welcome, \",username]}),/*#__PURE__*/_jsxs(\"section\",{id:\"my-messages-container\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"messages-title\",children:\"My Messages\"}),myMessages.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"You Don't Have Any Messages\"}):myMessages.map(function(message,idx){return/*#__PURE__*/_jsxs(\"section\",{className:\"each-post-section\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-label\",children:\"Item: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"message-detail\",children:message.post.title}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"message-label\",children:\"From User: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"message-detail\",children:message.fromUser.username}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"message-label\",children:\"Message: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"message\",children:message.content}),/*#__PURE__*/_jsx(\"br\",{})]},idx);})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"my-posts-container\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"posts-title\",children:\"My Posts\"}),myPosts.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"You Don't Have Any Posts\"}):myPosts.map(function(mypost,idx){return/*#__PURE__*/_jsxs(\"section\",{className:\"each-post-section\",id:mypost.active?\"active-post\":\"deleted-post\",children:[/*#__PURE__*/_jsxs(\"span\",{id:\"post-id\",children:[\"id:\",mypost._id]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Item: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-title\",children:mypost.title}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Location: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-location\",children:mypost.location}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Status: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-status\",children:mypost.active?\"Active\":/*#__PURE__*/_jsx(\"em\",{children:\"\\\"No Longer Active\\\"\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Description: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-description\",children:mypost.description}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Price: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-price\",children:mypost.price}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Delivery Available: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-delivery\",children:mypost.willDeliver?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-post\",disabled:mypost.active?false:true,onChange:function onChange(evt){return deletePost(token,mypost._id);},children:\"Delete Post\"}),/*#__PURE__*/_jsx(\"span\",{className:\"edit-post\",children:/*#__PURE__*/_jsx(\"div\",{id:\"edit-post-link\",hidden:!mypost.active,children:/*#__PURE__*/_jsx(Link,{to:\"/edit-post/:\".concat(mypost._id),children:\"Edit Post\"})})})]},idx);})]})]})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","Link","Navigate","getMe","deletePost","Profile","token","setToken","isLoggedIn","currentUser","username","myPosts","setMyPosts","myMessages","setMyMessages","getMyProfile","JSON","parse","localStorage","userObject","data","posts","messages","console","log","length","map","message","idx","post","title","fromUser","content","mypost","active","_id","location","description","price","willDeliver","evt"],"sources":["/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/src/components/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link, Navigate } from 'react-router-dom';\nimport { getMe, deletePost } from '../api'\n\n\nconst Profile = ( { token, setToken, isLoggedIn, currentUser, username } ) => {\n    const [myPosts, setMyPosts] = useState([]);\n    const [myMessages, setMyMessages] = useState([])\n\n\n\n \n    \n    useEffect(() => {\n        \n        const getMyProfile = async () => {\n\n            const userObject = await getMe(JSON.parse(localStorage.token));\n            setMyPosts(userObject.data.posts)\n            setMyMessages(userObject.data.messages)\n\n        }\n\n      getMyProfile();\n      console.log(\"isLoggedin:\", isLoggedIn)\n\n    \n    }, [isLoggedIn, setMyPosts])\n\n\n\n\n\n\n\n    return (\n        <div className=\"profile-container\">\n            {\n                !isLoggedIn\n                    ? \n                    <Navigate to=\"/log-in/\"/>\n                    :\n                        \n                    <div>\n                        <h1 id='welcome'>Welcome, {username}</h1>\n                        <section id='my-messages-container'>\n                        <h1 id=\"messages-title\">My Messages</h1>\n                            {\n                            myMessages.length === 0\n                            ?\n                                <h3>You Don't Have Any Messages</h3>\n                            :\n                                myMessages.map((message, idx) => {\n                                                                        \n                                    return (\n                                        <section className='each-post-section' key={idx}>\n                                            <span className=\"message-label\">Item: </span>\n                                            <span className=\"message-detail\">{message.post.title}</span><br></br>\n                                            <span className=\"message-label\">From User: </span>\n                                            <span className=\"message-detail\">{message.fromUser.username}</span><br></br>\n                                            <span className=\"message-label\">Message: </span>\n                                            <span className=\"message\">{message.content}</span><br></br>\n                                        </section>\n                                    )\n                                })\n                            }\n                        </section>\n                        <section className='my-posts-container'>\n                        <h1 id='posts-title'>My Posts</h1>\n                            {\n                            myPosts.length === 0\n                            ?\n                                <h3>You Don't Have Any Posts</h3>\n                            :\n                                myPosts.map((mypost, idx) => {\n                                    \n                    \n                                    return (\n                                        <section \n                                            className='each-post-section' \n                                            key={idx}\n                                            id= { mypost.active ? \"active-post\" : \"deleted-post\" }\n                                        >   \n                                            <span id=\"post-id\">id:{mypost._id}</span><br></br>\n                                            <span className=\"post-label\">Item: </span>\n                                            <span className=\"post-title\">{mypost.title}</span><br></br>\n                                            <span className=\"post-label\">Location: </span>\n                                            <span className=\"post-location\">{mypost.location}</span><br></br>\n                                            <span className=\"post-label\">Status: </span>\n                                            <span className=\"post-status\">{mypost.active ? \"Active\" : <em>\"No Longer Active\"</em>}</span><br></br>\n                                            <span className=\"post-label\">Description: </span>\n                                            <span className=\"post-description\">{mypost.description}</span><br></br>\n                                            <span className=\"post-label\">Price: </span>\n                                            <span className=\"post-price\">{mypost.price}</span><br></br>\n                                            <span className=\"post-label\">Delivery Available: </span>\n                                            <span className=\"post-delivery\">{mypost.willDeliver ? \"Yes\" : \"No\"}</span><br></br>\n                                            <button\n                                                    className='delete-post'\n                                                    disabled= {mypost.active ? false : true }\n                                                    onChange= {(evt) => deletePost(token, mypost._id)}\n                                                \n                                                    >Delete Post\n                                                </button>\n                                            <span className='edit-post'>\n                                            <div id='edit-post-link'\n                                                    hidden={!mypost.active}>\n                                                        <Link to={`/edit-post/:${mypost._id}`} >Edit Post</Link>\n                                            </div>\n                                            </span>\n                                        </section>\n                                        )\n                                })\n                                \n                            }\n                        </section>\n                    </div>\n            }  \n        </div>\n    )\n}\n\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module"}