{"ast":null,"code":"import React from \"react\";\nexport const BASE_URL = 'https://strangers-things.herokuapp.com';\nexport const cohortName = '2206-ftb-et-web-ft-b';\nexport const testToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MmQyMWVkZWM3ODA5MDAwMTcxMzA1NGQiLCJ1c2VybmFtZSI6InNuczA5ZiIsImlhdCI6MTY1NzkzNzYzMH0.sYZ0u-ZbNaeu3ZrAuZakv9s9eErRBdkdhtJM2eAUV9Q';\nexport const logOutUser = evt => {\n  evt.preventDefault();\n  console.log('loggin out', currentUser);\n  localStorage.removeItem('currentUser');\n  localStorage.removeItem('token');\n  setCurrentUser({});\n};\nexport const getMe = async token => {\n  try {\n    const response = await fetch(`${BASE_URL}/api/${cohortName}/users/me`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${testToken}`\n      }\n    });\n    const result = await response.json();\n    console.log('result from getMe: ', result);\n    return result;\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const postLogIn = async (username, password) => {\n  try {\n    const response = await fetch(`${BASE_URL}/api/${cohortName}/users/login`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user: {\n          \"username\": username,\n          \"password\": password\n        }\n      })\n    });\n    const result = await response.json();\n    const resultToken = result.data.token;\n    return resultToken;\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const postNewUser = async (username, password) => {\n  try {\n    const response = await fetch(`${BASE_URL}/api/${cohortName}/users/register`, {\n      method: \"POST\",\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        user: {\n          \"username\": username,\n          \"password\": password\n        }\n      })\n    });\n    const result = await response.json();\n    const resultToken = result.data.token;\n    return resultToken;\n  } catch (error) {\n    console.error(error);\n  }\n};\nexport const fetchPosts = async () => {\n  try {\n    const response = await fetch(`${BASE_URL}/api/${cohortName}/posts`);\n    const data = await response.json();\n    const actualPosts = data.data.posts;\n    return actualPosts;\n  } catch (error) {\n    console.error(error);\n  }\n};","map":{"version":3,"names":["React","BASE_URL","cohortName","testToken","logOutUser","evt","preventDefault","console","log","currentUser","localStorage","removeItem","setCurrentUser","getMe","token","response","fetch","headers","result","json","error","postLogIn","username","password","method","body","JSON","stringify","user","resultToken","data","postNewUser","fetchPosts","actualPosts","posts"],"sources":["/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/src/api/index.js"],"sourcesContent":["import React from \"react\";\nexport const BASE_URL = 'https://strangers-things.herokuapp.com';\nexport const cohortName = '2206-ftb-et-web-ft-b';\nexport const testToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MmQyMWVkZWM3ODA5MDAwMTcxMzA1NGQiLCJ1c2VybmFtZSI6InNuczA5ZiIsImlhdCI6MTY1NzkzNzYzMH0.sYZ0u-ZbNaeu3ZrAuZakv9s9eErRBdkdhtJM2eAUV9Q'\n\n\nexport const logOutUser = (evt) => {\n    evt.preventDefault();\n    console.log('loggin out', currentUser)\n    localStorage.removeItem('currentUser')\n    localStorage.removeItem('token')\n    setCurrentUser({});\n}\n\nexport const getMe = async (token) =>  {\n\n    try{\n        const response = await fetch(`${BASE_URL}/api/${cohortName}/users/me`,\n            {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${testToken}`\n                },\n            }\n        );\n            const result = await response.json();\n            console.log('result from getMe: ', result)\n            return result;\n    } catch(error) {\n        console.error(error)\n    }\n\n}\n\n\nexport const postLogIn = async (username, password) => {\n\n    try {\n        const response = await fetch(`${BASE_URL}/api/${cohortName}/users/login`, \n                {\n                    method: \"POST\",\n                    headers: {\n                    'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                    user: {\n                        \"username\": username,\n                        \"password\": password\n                    }\n                    })\n                }\n        );\n            const result = await response.json()\n            const resultToken = result.data.token\n            return resultToken;\n        }\n        catch(error){\n            console.error(error)\n        }\n}\n\n\n\nexport const postNewUser = async (username, password) => {\n\n    try {\n        const response = await fetch(`${BASE_URL}/api/${cohortName}/users/register`, \n                {\n                    method: \"POST\",\n                    headers: {\n                    'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                    user: {\n                        \"username\": username,\n                        \"password\": password\n                    }\n                    })\n                }\n            );\n            const result = await response.json()\n            const resultToken = result.data.token\n            return resultToken;\n        }\n        catch(error){\n            console.error(error)\n        }\n}\n\nexport const fetchPosts = async () => {\n \n    try {\n      const response = await fetch(`${ BASE_URL }/api/${ cohortName }/posts`);\n      const data = await response.json();\n      const actualPosts = data.data.posts\n      return actualPosts;\n    } catch (error) {\n      console.error(error);\n      }\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module"}