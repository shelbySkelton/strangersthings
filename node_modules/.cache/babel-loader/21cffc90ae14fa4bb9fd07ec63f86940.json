{"ast":null,"code":"import _regeneratorRuntime from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams}from'react-router-dom';import{fetchAllPosts,patchEdit}from\"../api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditPost=function EditPost(_ref){var isLoggedIn=_ref.isLoggedIn,token=_ref.token;var _useParams=useParams(),postId=_useParams.postId;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState('[On Request]'),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),willDeliver=_useState10[0],setWillDeliver=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),postList=_useState12[0],setPostList=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),editSuccess=_useState14[0],setEditSuccess=_useState14[1];var postIdArray=postId.split('');postIdArray.shift();var colonlessPostId=postIdArray.join('');useEffect(function(){var getPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var returnedPosts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchAllPosts(token);case 2:returnedPosts=_context.sent;setPostList(returnedPosts);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getPosts(){return _ref2.apply(this,arguments);};}();getPosts();},[isLoggedIn]);var submitEdits=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(evt){var result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:evt.preventDefault();_context2.next=3;return patchEdit(colonlessPostId,token,title,description,price,location,willDeliver);case 3:result=_context2.sent;if(result.success){setEditSuccess(result.success);setTitle(result.data.post.title);setLocation(result.data.post.location);setDescription(result.post.data.description);setPrice(result.data.post.price);setWillDeliver(result.data.post.willDeliver);}console.log(result);return _context2.abrupt(\"return\",result);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function submitEdits(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{id:\"edit-post-container\",children:[postList.map(function(eachPost,idx){{if(eachPost._id===colonlessPostId){return/*#__PURE__*/_jsxs(\"section\",{className:\"each-post-section\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Post\"}),/*#__PURE__*/_jsx(\"p\",{hidden:!editSuccess,children:\"*UPDATED*\"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Item: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-title\",children:editSuccess?title:eachPost.title}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Location: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-location\",children:editSuccess?location:eachPost.location}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Description: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-description\",children:editSuccess?description:eachPost.description}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Price: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-price\",children:editSuccess?price:eachPost.price}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Delivery Available: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-delivery\",children:editSuccess?willDeliver:eachPost.willDeliver?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"br\",{})]},idx);}}}),/*#__PURE__*/_jsx(\"h1\",{children:\"Edit Post\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"edit-post-form\",onSubmit:submitEdits,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",required:true,onChange:function onChange(evt){return setTitle(evt.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,placeholder:\"Location\",onChange:function onChange(evt){return setLocation(evt.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,placeholder:\"Description\",onChange:function onChange(evt){return setDescription(evt.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,placeholder:\"Price\",onChange:function onChange(evt){return setPrice(evt.target.value);}}),/*#__PURE__*/_jsx(\"label\",{id:\"delivery-label\",children:\"Willing to Deliver?\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"willdeliverycheckbox\",onChange:function onChange(evt){return setWillDeliver(!willDeliver);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",disabled:isLoggedIn?false:true,value:\"Edit My Post\"})]})]});};export default EditPost;","map":{"version":3,"names":["React","useState","useEffect","useParams","fetchAllPosts","patchEdit","EditPost","isLoggedIn","token","postId","title","setTitle","description","setDescription","price","setPrice","location","setLocation","willDeliver","setWillDeliver","postList","setPostList","editSuccess","setEditSuccess","postIdArray","split","shift","colonlessPostId","join","getPosts","returnedPosts","submitEdits","evt","preventDefault","result","success","data","post","console","log","map","eachPost","idx","_id","target","value"],"sources":["/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/src/components/EditPost.js"],"sourcesContent":["import React, { useState, useEffect }from \"react\";\nimport { useParams} from 'react-router-dom';\nimport { fetchAllPosts, patchEdit } from \"../api\";\n\n\n\nconst EditPost = ({ isLoggedIn, token }) => {\n    const { postId } = useParams();\n\n    const [title, setTitle] = useState('')\n    const [description, setDescription] = useState('')\n    const [price, setPrice] = useState('')\n    const [location, setLocation] = useState('[On Request]')\n    const [willDeliver, setWillDeliver]= useState(false)\n    const [postList, setPostList] = useState([])\n    const [editSuccess, setEditSuccess] = useState(false);\n\n    let postIdArray = postId.split('');\n    postIdArray.shift();\n    let colonlessPostId = postIdArray.join('')\n\n\n    useEffect(() =>  {\n        \n        \n        const getPosts = async () => {\n            const returnedPosts = await fetchAllPosts(token);\n            setPostList(returnedPosts);\n        }\n\n    getPosts();\n    }, [isLoggedIn])\n\n\n   \n\n    const submitEdits = async (evt) => {\n        evt.preventDefault();\n        const result = await patchEdit(colonlessPostId, token, title, description, price, location, willDeliver)\n        if (result.success) {\n            setEditSuccess(result.success)\n            setTitle(result.data.post.title)\n            setLocation(result.data.post.location)\n            setDescription(result.post.data.description)\n            setPrice(result.data.post.price)\n            setWillDeliver(result.data.post.willDeliver)\n        }\n        console.log(result)\n        return result;\n    }\n    \n\n\n    return (\n        <section id='edit-post-container'>\n            {\n                postList.map((eachPost, idx) => {\n                    {\n                        if (eachPost._id === colonlessPostId) {\n                            return (\n                            <section className=\"each-post-section\" key={idx}>\n                                <h1>My Post</h1>\n                                <p hidden={!editSuccess}>*UPDATED*</p>\n                                <span className=\"post-label\">Item: </span>\n                                <span className=\"post-title\">{ editSuccess ? title : eachPost.title}</span><br></br>\n                                <span className=\"post-label\">Location: </span>\n                                <span className=\"post-location\">{ editSuccess ? location : eachPost.location}</span><br></br>\n                                <span className=\"post-label\">Description: </span>\n                                <span className=\"post-description\">{ editSuccess ? description : eachPost.description}</span><br></br>\n                                <span className=\"post-label\">Price: </span>\n                                <span className=\"post-price\">{ editSuccess ? price : eachPost.price}</span><br></br>\n                                <span className=\"post-label\">Delivery Available: </span>\n                                <span className=\"post-delivery\">{ editSuccess ? willDeliver : eachPost.willDeliver ? \"Yes\" : \"No\"}</span><br></br>\n                             </section>\n                            )\n                        }\n                    }\n                })\n\n            }\n   \n            <h1>Edit Post</h1>          \n\n            \n                <form\n                    id='edit-post-form'\n                    onSubmit={submitEdits}\n                >\n                    <input\n                        type='text'\n                        placeholder=\"Title\"\n                        required\n                        onChange={(evt) => setTitle(evt.target.value)}\n                    ></input>\n                    <input\n                        type='text'\n                        required\n                        placeholder=\"Location\"\n                        onChange={(evt) => setLocation(evt.target.value)}\n                    ></input>\n                    <input\n                        type='text'\n                        required\n                        placeholder=\"Description\"\n                        onChange={(evt) => setDescription(evt.target.value)}\n                    ></input>\n                    <input\n                        type='text'\n                        required\n                        placeholder=\"Price\"\n                        onChange={(evt) => setPrice(evt.target.value)}\n                    ></input>                    \n                    <label id='delivery-label'>Willing to Deliver?</label>\n                    <input\n                        type='checkbox'\n                        id=\"willdeliverycheckbox\"\n                        onChange={(evt) => setWillDeliver(!willDeliver)}\n                    ></input>\n                    <input\n                        type=\"submit\"\n                        disabled= {isLoggedIn ? false : true}\n                        value=\"Edit My Post\"\n                    ></input>\n                </form>\n            \n        </section>\n    )\n}\n\n\n\nexport default EditPost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}