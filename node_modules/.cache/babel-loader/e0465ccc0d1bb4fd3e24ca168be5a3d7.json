{"ast":null,"code":"import _regeneratorRuntime from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";// import RegisterForm from \"./RegisterForm\"\nimport{Link}from\"react-router-dom\";import{postLogIn}from\"../api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LogIn=function LogIn(_ref){var username=_ref.username,setUsername=_ref.setUsername,password=_ref.password,setPassword=_ref.setPassword,currentUser=_ref.currentUser,setCurrentUser=_ref.setCurrentUser,token=_ref.token,setToken=_ref.setToken,isLoggedIn=_ref.isLoggedIn,setIsLoggedIn=_ref.setIsLoggedIn;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];// useEffect(() => {\n//     const userFromLocalStorage = localStorage.getItem('currentUser');\n//     const tokenFromLocalStorage = localStorage.getItem('token')\n//     let usernamefromLocalStorage = userFromLocalStorage\n//     tokenFromLocalStorage ?\n//         setToken(JSON.parse(tokenFromLocalStorage))\n//         :\n//         null\n//     userFromLocalStorage ? \n//         setCurrentUser(JSON.parse(userFromLocalStorage))\n//         :\n//         null\n// },[])\nvar loginUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(evt){var loggedInUserObj,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:evt.preventDefault();loggedInUserObj={username:username,password:password// token\n};_context.next=4;return postLogIn(username,password);case 4:result=_context.sent;setToken(result.data.token);setCurrentUser(loggedInUserObj);// setErrorMessage(result.message)\n// console.log(JSON.stringify(result.message))\n// console.log(result.error.message)\n// let resultError = result.data.error;\n// setErrorMessage(JSON.stringify(resultError.message))\nlocalStorage.setItem('currentUser',JSON.stringify(loggedInUserObj));localStorage.setItem('token',JSON.stringify(result.data.token));setIsLoggedIn(result.success);setUsername('');setPassword('');case 12:case\"end\":return _context.stop();}}},_callee);}));return function loginUser(_x){return _ref2.apply(this,arguments);};}();// console.log('token:',token)\n// console.log('currentUser: ', currentUser)\n// console.log('username  & pw', username, password)\nvar logOutUser=function logOutUser(evt){evt.preventDefault();localStorage.removeItem('currentUser');localStorage.removeItem('token');setUsername('');setPassword('');setToken('');console.log(currentUser);};return/*#__PURE__*/_jsxs(\"section\",{className:\"log-container\",children:[/*#__PURE__*/_jsxs(\"form\",{id:\"log-in-form\",onSubmit:loginUser,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Log In\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:username,id:\"username\",placeholder:\"Username*\",onChange:function onChange(evt){return setUsername(evt.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,value:password,id:\"password\",placeholder:\"Password*\",onChange:function onChange(evt){return setPassword(evt.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Log In\"})]}),/*#__PURE__*/_jsx(\"div\",{children://    localStorage.currentUser && localStorage.token ? \nisLoggedIn?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:errorMessage}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You are logged in as \",currentUser.username]}),/*#__PURE__*/_jsx(\"input\",{onClick:logOutUser,type:\"submit\",value:\"Log Out\"})]}):/*#__PURE__*/_jsxs(\"div\",{id:\"no-user-logged-in-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:errorMessage}),/*#__PURE__*/_jsx(\"p\",{children:\"You are not logged in.\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Sign Up!\"})]})})]});};export default LogIn;","map":{"version":3,"names":["React","useState","useEffect","Link","postLogIn","LogIn","username","setUsername","password","setPassword","currentUser","setCurrentUser","token","setToken","isLoggedIn","setIsLoggedIn","errorMessage","setErrorMessage","loginUser","evt","preventDefault","loggedInUserObj","result","data","localStorage","setItem","JSON","stringify","success","logOutUser","removeItem","console","log","target","value"],"sources":["/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/src/components/LogIn.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n// import RegisterForm from \"./RegisterForm\"\nimport { Link } from \"react-router-dom\";\nimport { postLogIn } from \"../api\";\n\nconst LogIn = ({ username, setUsername, password, setPassword, currentUser, setCurrentUser, token, setToken, isLoggedIn, setIsLoggedIn }) => {\n    \n    const [errorMessage, setErrorMessage] = useState('')\n    // useEffect(() => {\n    //     const userFromLocalStorage = localStorage.getItem('currentUser');\n    //     const tokenFromLocalStorage = localStorage.getItem('token')\n\n    //     let usernamefromLocalStorage = userFromLocalStorage\n    //     tokenFromLocalStorage ?\n    //         setToken(JSON.parse(tokenFromLocalStorage))\n    //         :\n    //         null\n\n    //     userFromLocalStorage ? \n    //         setCurrentUser(JSON.parse(userFromLocalStorage))\n    //         :\n    //         null\n    // },[])\n\n\n    const loginUser = async (evt) => {\n        evt.preventDefault();\n        let loggedInUserObj = {\n            username,\n            password,\n            // token\n        }\n        const result = await postLogIn(username, password);\n        setToken(result.data.token)  \n        setCurrentUser(loggedInUserObj);\n        // setErrorMessage(result.message)\n        // console.log(JSON.stringify(result.message))\n        \n            // console.log(result.error.message)\n            // let resultError = result.data.error;\n            // setErrorMessage(JSON.stringify(resultError.message))\n            \n        \n        \n        localStorage.setItem('currentUser', JSON.stringify(loggedInUserObj));\n        localStorage.setItem('token', JSON.stringify(result.data.token))\n        \n        setIsLoggedIn(result.success);\n        setUsername('');\n        setPassword('');   \n    }\n\n\n\n    // console.log('token:',token)\n    // console.log('currentUser: ', currentUser)\n    // console.log('username  & pw', username, password)\n    \n\n    const logOutUser = (evt) => {\n        evt.preventDefault();\n        localStorage.removeItem('currentUser')\n        localStorage.removeItem('token')\n        setUsername('')\n        setPassword('')\n        setToken('')\n        console.log(currentUser)\n    }\n\n\n    return (\n        <section className='log-container'>\n            <form \n                id='log-in-form'\n                onSubmit={loginUser}\n                >\n                <h3>Log In</h3>\n                <input\n                     type='text'\n                     required\n                     value={username}\n                     id=\"username\"\n                     placeholder=\"Username*\"\n                     onChange={(evt) => setUsername(evt.target.value)}\n                ></input>\n                <input\n                    type='password'\n                    required\n                    value={password}\n                    id='password'\n                    placeholder='Password*'\n                    onChange={(evt) => setPassword(evt.target.value)}\n                ></input>\n                <input\n                    type='submit'\n                    value=\"Log In\"\n                ></input>\n            </form>\n            <div>\n                {\n                //    localStorage.currentUser && localStorage.token ? \n                    isLoggedIn ?\n                   <div>\n                    <p>{errorMessage}</p>\n                    <p>You are logged in as {currentUser.username}</p>\n                   <input\n                    onClick={logOutUser}\n                    type='submit'\n                    value=\"Log Out\"\n                    ></input>\n                    </div>\n                   :\n                   <div id='no-user-logged-in-container'>\n                        <p>{errorMessage}</p>\n                        <p>You are not logged in.</p>\n                        <Link to=\"/register\">Sign Up!</Link>\n                   </div>\n                }\n            </div>\n        </section>\n\n    )\n}\n\nexport default LogIn;"],"mappings":"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"},"metadata":{},"sourceType":"module"}