{"ast":null,"code":"import _regeneratorRuntime from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";export var BASE_URL='https://strangers-things.herokuapp.com';export var cohortName='2206-ftb-et-web-ft-b';// export const testToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MmQyMWVkZWM3ODA5MDAwMTcxMzA1NGQiLCJ1c2VybmFtZSI6InNuczA5ZiIsImlhdCI6MTY1NzkzNzYzMH0.sYZ0u-ZbNaeu3ZrAuZakv9s9eErRBdkdhtJM2eAUV9Q'\nexport var patchEdit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(postId,token,title,description,price,location,willDeliver){var response,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(BASE_URL,\"/api/\").concat(cohortName,\"/posts/\").concat(postId),{method:\"PATCH\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({\"post\":{\"title\":title,\"description\":description,\"price\":price,\"location\":location,\"willDeliver\":willDeliver}})});case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;console.log(result.success);return _context.abrupt(\"return\",result.data.post);case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function patchEdit(_x,_x2,_x3,_x4,_x5,_x6,_x7){return _ref.apply(this,arguments);};}();export var deletePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(token,postID){var response,result;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"\".concat(BASE_URL,\"/api/\").concat(cohortName,\"/posts/\").concat(postID),{method:\"DELETE\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:result=_context2.sent;return _context2.abrupt(\"return\",result);case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function deletePost(_x8,_x9){return _ref2.apply(this,arguments);};}();export var postPost=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(token,title,description,price,location,willDeliver){var response,result;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"\".concat(BASE_URL,\"/api/\").concat(cohortName,\"/posts\"),{method:\"POST\",headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({post:{\"title\":title,\"description\":description,\"price\":price,\"location\":location,\"willDeliver\":willDeliver}})});case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:result=_context3.sent;return _context3.abrupt(\"return\",result.data.post);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.error(_context3.t0);case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,10]]);}));return function postPost(_x10,_x11,_x12,_x13,_x14,_x15){return _ref3.apply(this,arguments);};}();export var getMe=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(token){var response,result;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"\".concat(BASE_URL,\"/api/\").concat(cohortName,\"/users/me\"),{headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:result=_context4.sent;return _context4.abrupt(\"return\",result);case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](0);console.error(_context4.t0);case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[0,10]]);}));return function getMe(_x16){return _ref4.apply(this,arguments);};}();export var postLogIn=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(username,password){var response,result;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return fetch(\"\".concat(BASE_URL,\"/api/\").concat(cohortName,\"/users/login\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{\"username\":username,\"password\":password}})});case 3:response=_context5.sent;_context5.next=6;return response.json();case 6:result=_context5.sent;if(!result.success){_context5.next=11;break;}return _context5.abrupt(\"return\",result);case 11:return _context5.abrupt(\"return\",result.error);case 12:;_context5.next=18;break;case 15:_context5.prev=15;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);case 18:case\"end\":return _context5.stop();}}},_callee5,null,[[0,15]]);}));return function postLogIn(_x17,_x18){return _ref5.apply(this,arguments);};}();export var postNewUser=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(username,password){var response,result,resultToken;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;_context6.next=3;return fetch(\"\".concat(BASE_URL,\"/api/\").concat(cohortName,\"/users/register\"),{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{\"username\":username,\"password\":password}})});case 3:response=_context6.sent;_context6.next=6;return response.json();case 6:result=_context6.sent;resultToken=result.data.token;return _context6.abrupt(\"return\",resultToken);case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](0);console.error(_context6.t0);case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[0,11]]);}));return function postNewUser(_x19,_x20){return _ref6.apply(this,arguments);};}();export var fetchPosts=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(){var response,data,actualPosts;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return fetch(\"\".concat(BASE_URL,\"/api/\").concat(cohortName,\"/posts\"));case 3:response=_context7.sent;_context7.next=6;return response.json();case 6:data=_context7.sent;actualPosts=data.data.posts;return _context7.abrupt(\"return\",actualPosts);case 11:_context7.prev=11;_context7.t0=_context7[\"catch\"](0);console.error(_context7.t0);case 14:case\"end\":return _context7.stop();}}},_callee7,null,[[0,11]]);}));return function fetchPosts(){return _ref7.apply(this,arguments);};}();export var fetchAllPosts=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(token){var response,data,actualPosts;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return fetch(\"\".concat(BASE_URL,\"/api/\").concat(cohortName,\"/posts\"),{method:'GET',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)}});case 3:response=_context8.sent;_context8.next=6;return response.json();case 6:data=_context8.sent;actualPosts=data.data.posts;return _context8.abrupt(\"return\",actualPosts);case 11:_context8.prev=11;_context8.t0=_context8[\"catch\"](0);console.error(_context8.t0);case 14:case\"end\":return _context8.stop();}}},_callee8,null,[[0,11]]);}));return function fetchAllPosts(_x21){return _ref8.apply(this,arguments);};}();","map":{"version":3,"names":["React","BASE_URL","cohortName","patchEdit","postId","token","title","description","price","location","willDeliver","fetch","method","headers","body","JSON","stringify","response","json","result","console","log","success","data","post","error","deletePost","postID","postPost","getMe","postLogIn","username","password","user","postNewUser","resultToken","fetchPosts","actualPosts","posts","fetchAllPosts"],"sources":["/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/src/api/index.js"],"sourcesContent":["import React from \"react\";\nexport const BASE_URL = 'https://strangers-things.herokuapp.com';\nexport const cohortName = '2206-ftb-et-web-ft-b';\n// export const testToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MmQyMWVkZWM3ODA5MDAwMTcxMzA1NGQiLCJ1c2VybmFtZSI6InNuczA5ZiIsImlhdCI6MTY1NzkzNzYzMH0.sYZ0u-ZbNaeu3ZrAuZakv9s9eErRBdkdhtJM2eAUV9Q'\n\nexport const patchEdit = async (postId, token, title, description, price, location, willDeliver) => {\n    try {\n        const response = await fetch(`${BASE_URL}/api/${cohortName}/posts/${postId}`,\n        {\n            method: \"PATCH\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({\n                \"post\": {\n                    \"title\": title,\n                    \"description\": description,\n                    \"price\": price,\n                    \"location\": location,\n                    \"willDeliver\": willDeliver\n                }\n                })\n        });\n            const result = await response.json();\n            console.log(result.success)\n            return result.data.post;\n    } catch(error) {\n            console.error(error)\n        }\n\n}\n\n\n\n\nexport const deletePost = async (token, postID) => {\n    try {\n        const response = await fetch(`${BASE_URL}/api/${cohortName}/posts/${postID}`,\n        {\n            method: \"DELETE\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n        });\n        const result = await response.json();\n        return result;\n        } catch(error) {\n            console.error(error)\n        }\n}\n\nexport const postPost = async (token, title, description, price, location, willDeliver) => {\n    try{\n        const response = await fetch(`${BASE_URL}/api/${cohortName}/posts`,\n        {\n            method: \"POST\",\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify({\n                post: {\n                    \"title\": title,\n                    \"description\": description,\n                    \"price\": price,\n                    \"location\": location,\n                    \"willDeliver\": willDeliver\n                }\n                })\n\n        }\n        );\n            const result = await response.json();\n            return result.data.post;\n    } catch(error) {\n        console.error(error)\n    }\n}\n\n\n\n\nexport const getMe = async (token) =>  {\n\n    try{\n        const response = await fetch(`${BASE_URL}/api/${cohortName}/users/me`,\n            {\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`\n                },\n            }\n        );\n            const result = await response.json();\n            return result;\n    } catch(error) {\n        console.error(error)\n    }\n\n}\n\n\nexport const postLogIn = async (username, password) => {\n\n    try {\n        const response = await fetch(`${BASE_URL}/api/${cohortName}/users/login`, \n                {\n                    method: \"POST\",\n                    headers: {\n                    'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                    user: {\n                        \"username\": username,\n                        \"password\": password\n                    }\n                    })\n                }\n        );\n            const result = await response.json()\n            if (result.success){\n                return result;\n            }\n            else {\n                return result.error\n            }\n            ;\n        }\n        catch(error){\n            console.log(error)\n        }\n}\n\n\n\nexport const postNewUser = async (username, password) => {\n\n    try {\n        const response = await fetch(`${BASE_URL}/api/${cohortName}/users/register`, \n                {\n                    method: \"POST\",\n                    headers: {\n                    'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                    user: {\n                        \"username\": username,\n                        \"password\": password\n                    }\n                    })\n                }\n            );\n            const result = await response.json()\n            const resultToken = result.data.token\n            return resultToken;\n        }\n        catch(error){\n            console.error(error)\n        }\n}\n\nexport const fetchPosts = async () => {\n \n    try {\n      const response = await fetch(`${ BASE_URL }/api/${ cohortName }/posts`);\n      const data = await response.json();\n      const actualPosts = data.data.posts\n      return actualPosts;\n    } catch (error) {\n      console.error(error);\n      }\n  }\n\n  export const fetchAllPosts = async (token) => {\n    try {\n        const response = await fetch(`${ BASE_URL }/api/${ cohortName }/posts`,\n        {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n            },\n        });\n        const data = await response.json();\n        const actualPosts = data.data.posts\n        return actualPosts;\n    } catch (error) {\n        console.error(error)\n        } \n  }"],"mappings":"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"},"metadata":{},"sourceType":"module"}