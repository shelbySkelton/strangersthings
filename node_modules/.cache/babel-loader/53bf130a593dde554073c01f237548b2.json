{"ast":null,"code":"import _regeneratorRuntime from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link,useParams,Route}from'react-router-dom';import{getMe,deletePost}from'../api';import EditPost from'./EditPost';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(_ref){var token=_ref.token,setToken=_ref.setToken,isLoggedIn=_ref.isLoggedIn,currentUser=_ref.currentUser,username=_ref.username;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),myPosts=_useState2[0],setMyPosts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),myMessages=_useState4[0],setMyMessages=_useState4[1];useEffect(function(){var getMyProfile=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userObject;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getMe(JSON.parse(localStorage.token));case 2:userObject=_context.sent;setMyPosts(userObject.data.posts);setMyMessages(userObject.data.messages);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getMyProfile(){return _ref2.apply(this,arguments);};}();getMyProfile();console.log(\"isLoggedin:\",isLoggedIn);},[isLoggedIn,setMyPosts]);return/*#__PURE__*/_jsx(\"div\",{className:\"profile-container\",children:!isLoggedIn?/*#__PURE__*/_jsx(\"h1\",{children:\"Please Log In to View Your Profile\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{id:\"welcome\",children:[\"Welcome \",username,\"!\"]}),/*#__PURE__*/_jsxs(\"section\",{id:\"my-messages-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"profile-title\",children:\"My Messages\"}),myMessages.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"You Don't Have Any Messages\"}):myMessages.map(function(message,idx){return/*#__PURE__*/_jsxs(\"section\",{className:\"each-post-section\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"message-label\",children:\"Item: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"message-title\",children:message.post.title}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"message-label\",children:\"From User: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"message-author\",children:message.fromUser.username}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"message-label\",children:\"Message: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"message-title\",children:message.content}),/*#__PURE__*/_jsx(\"br\",{})]},idx);})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"my-posts-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"profile-title\",children:\"My Posts\"}),myPosts.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"You Don't Have Any Posts\"}):myPosts.map(function(mypost,idx){return/*#__PURE__*/_jsxs(\"section\",{className:\"each-post-section\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Item: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-title\",children:mypost.title}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Location: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-location\",children:mypost.location}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Status: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-status\",children:mypost.active?\"Active\":/*#__PURE__*/_jsx(\"em\",{children:\"\\\"No Longer Active\\\"\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Description: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-description\",children:mypost.description}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Price: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-price\",children:mypost.price}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Delivery Available: \"}),/*#__PURE__*/_jsx(\"span\",{className:\"post-delivery\",children:mypost.willDeliver?\"Yes\":\"No\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"post-label\",children:\"Messages :\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{className:\"post-id\",children:[\"id: \",mypost._id]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"delete-post\",children:/*#__PURE__*/_jsx(\"button\",{disabled:mypost.active?false:true,onClick:function onClick(evt){return deletePost(token,mypost._id);},children:\"Delete Post\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"edit-post\",children:/*#__PURE__*/_jsx(\"div\",{id:\"edit-post-link\",hidden:!mypost.active,children:/*#__PURE__*/_jsx(Link,{to:\"/edit-post/:\".concat(mypost._id),children:\"Edit Post\"})})})]},idx);})]})]})});};export default Profile;","map":{"version":3,"names":["React","useEffect","useState","Link","useParams","Route","getMe","deletePost","EditPost","Profile","token","setToken","isLoggedIn","currentUser","username","myPosts","setMyPosts","myMessages","setMyMessages","getMyProfile","JSON","parse","localStorage","userObject","data","posts","messages","console","log","length","map","message","idx","post","title","fromUser","content","mypost","location","active","description","price","willDeliver","_id","evt"],"sources":["/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/src/components/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link , useParams, Route } from 'react-router-dom';\nimport { getMe, deletePost } from '../api'\nimport EditPost from './EditPost';\n\n\nconst Profile = ( { token, setToken, isLoggedIn, currentUser, username } ) => {\n\n    const [myPosts, setMyPosts] = useState([]);\n    const [myMessages, setMyMessages] = useState([])\n\n\n\n \n    \n    useEffect(() => {\n        \n        const getMyProfile = async () => {\n\n            const userObject = await getMe(JSON.parse(localStorage.token));\n            setMyPosts(userObject.data.posts)\n            setMyMessages(userObject.data.messages)\n\n        }\n\n      getMyProfile();\n      console.log(\"isLoggedin:\", isLoggedIn)\n\n    \n    }, [isLoggedIn, setMyPosts])\n\n\n\n\n\n\n\n    return (\n        <div className=\"profile-container\">\n            {\n                !isLoggedIn\n                    ? \n                    <h1>Please Log In to View Your Profile</h1>\n                    :\n                        \n                    <div className=\"profile-container\">\n                        <h1 id='welcome'>Welcome {username}!</h1>\n                        <section id='my-messages-container'>\n                        <h1 className=\"profile-title\">My Messages</h1>\n                            {\n                            myMessages.length === 0\n                            ?\n                                <h3>You Don't Have Any Messages</h3>\n                            :\n                                myMessages.map((message, idx) => {\n                                \n                                    \n                                    return (\n                                        <section className='each-post-section' key={idx}>\n                                            <span className=\"message-label\">Item: </span>\n                                            <span className=\"message-title\">{message.post.title}</span><br></br>\n                                            <span className=\"message-label\">From User: </span>\n                                            <span className=\"message-author\">{message.fromUser.username}</span><br></br>\n                                            <span className=\"message-label\">Message: </span>\n                                            <span className=\"message-title\">{message.content}</span><br></br>\n                                        </section>\n                                    )\n                                })\n                            }\n                        </section>\n                        <section className='my-posts-container'>\n                        <h1 className='profile-title'>My Posts</h1>\n                            {\n                            myPosts.length === 0\n                            ?\n                                <h3>You Don't Have Any Posts</h3>\n                            :\n                                myPosts.map((mypost, idx) => {\n                                    \n                    \n                                    return (\n                                        <section className='each-post-section' key={idx}>\n                                           \n                                            <span className=\"post-label\">Item: </span>\n                                            <span className=\"post-title\">{mypost.title}</span><br></br>\n                                            <span className=\"post-label\">Location: </span>\n                                            <span className=\"post-location\">{mypost.location}</span><br></br>\n                                            <span className=\"post-label\">Status: </span>\n                                            <span className=\"post-status\">{mypost.active ? \"Active\" : <em>\"No Longer Active\"</em>}</span><br></br>\n                                            <span className=\"post-label\">Description: </span>\n                                            <span className=\"post-description\">{mypost.description}</span><br></br>\n                                            <span className=\"post-label\">Price: </span>\n                                            <span className=\"post-price\">{mypost.price}</span><br></br>\n                                            <span className=\"post-label\">Delivery Available: </span>\n                                            <span className=\"post-delivery\">{mypost.willDeliver ? \"Yes\" : \"No\"}</span><br></br>\n                                            <span className=\"post-label\">Messages :</span><br></br>\n                                            {/* <span className=\"post-posted\">{mypost.messages ? \"PUTALINKHERE\" : \"No messages\"}</span><br></br> */}\n                                            <span className=\"post-id\">id: {mypost._id}</span><br></br>\n                                            <span className='delete-post'>\n                                                <button\n                                                    disabled= {mypost.active ? false : true }\n                                                    onClick={(evt) => deletePost(token, mypost._id)}\n                                                \n                                                    >Delete Post\n                                                </button>\n                                            </span>\n                                            <span className='edit-post'>\n                                            <div id='edit-post-link'\n                                                    hidden={!mypost.active}>\n                                                        <Link to={`/edit-post/:${mypost._id}`} >Edit Post</Link>\n                                            </div>\n                                                \n                                                {/* <Route path='/edit-post/:postId' element={<EditPost/>}/> */}\n                                            </span>\n                                        </section>\n                                        )\n                                })\n                                \n                            }\n                        </section>\n                    </div>\n            }  \n        </div>\n    )\n}\n\nexport default Profile;"],"mappings":"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"},"metadata":{},"sourceType":"module"}