{"ast":null,"code":"import _regeneratorRuntime from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Navigate,Link}from\"react-router-dom\";import{postLogIn}from\"../api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LogIn=function LogIn(_ref){var username=_ref.username,setUsername=_ref.setUsername,password=_ref.password,setPassword=_ref.setPassword,setCurrentUser=_ref.setCurrentUser,setToken=_ref.setToken,isLoggedIn=_ref.isLoggedIn,setIsLoggedIn=_ref.setIsLoggedIn;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var loginUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(evt){var loggedInUserObj,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:evt.preventDefault();loggedInUserObj={username:username,password:password};_context.next=4;return postLogIn(username,password);case 4:result=_context.sent;if(result.success){setToken(result.data.token);setCurrentUser(loggedInUserObj);setIsLoggedIn(result.success);}else if(!result.success){setErrorMessage(result.error.message);setUsername('');setPassword('');}localStorage.setItem('currentUser',JSON.stringify(loggedInUserObj));localStorage.setItem('token',JSON.stringify(result.data.token));case 8:case\"end\":return _context.stop();}}},_callee);}));return function loginUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{id:\"log-container\",children:/*#__PURE__*/_jsxs(\"section\",{id:\"log-in-box\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Log In\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"log-in-form\",onSubmit:loginUser,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:username,id:\"username\",placeholder:\"Username*\",onChange:function onChange(evt){return setUsername(evt.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,value:password,id:\"password\",placeholder:\"Password*\",onChange:function onChange(evt){return setPassword(evt.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"LOG IN\"})]}),/*#__PURE__*/_jsx(\"div\",{children:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/profile/\"}):/*#__PURE__*/_jsxs(\"div\",{id:\"no-user-logged-in-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:errorMessage}),/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Sign Up!\"})]})})]})});};export default LogIn;","map":{"version":3,"names":["React","useState","Navigate","Link","postLogIn","LogIn","username","setUsername","password","setPassword","setCurrentUser","setToken","isLoggedIn","setIsLoggedIn","errorMessage","setErrorMessage","loginUser","evt","preventDefault","loggedInUserObj","result","success","data","token","error","message","localStorage","setItem","JSON","stringify","target","value"],"sources":["/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/src/components/LogIn.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Navigate, Link } from \"react-router-dom\";\nimport { postLogIn } from \"../api\";\n\nconst LogIn = ({ username, setUsername, password, setPassword, setCurrentUser, setToken, isLoggedIn, setIsLoggedIn }) => {\n    \n    \n    const [errorMessage, setErrorMessage] = useState('')\n\n\n\n    const loginUser = async (evt) => {\n        evt.preventDefault();\n        let loggedInUserObj = {\n            username,\n            password,\n        }\n        const result = await postLogIn(username, password);\n            if (result.success) {\n                setToken(result.data.token);\n                setCurrentUser(loggedInUserObj);\n                setIsLoggedIn(result.success)\n            } else if (!result.success) {\n                setErrorMessage(result.error.message)\n                setUsername('');\n                setPassword(''); \n            }            \n        \n        localStorage.setItem('currentUser', JSON.stringify(loggedInUserObj));\n        localStorage.setItem('token', JSON.stringify(result.data.token))\n        \n   \n    }\n\n\n\n\n\n    return (\n        <section id='log-container'>\n            <section id='log-in-box'><h2>Log In</h2>\n                <form \n                    id='log-in-form'\n                    onSubmit={loginUser}\n                    >\n                    <input\n                        type='text'\n                        required\n                        value={username}\n                        id=\"username\"\n                        placeholder=\"Username*\"\n                        onChange={(evt) => setUsername(evt.target.value)}\n                    ></input>\n                    <input\n                        type='password'\n                        required\n                        value={password}\n                        id='password'\n                        placeholder='Password*'\n                        onChange={(evt) => setPassword(evt.target.value)}\n                    ></input>\n                    <input\n                        type='submit'\n                        value=\"LOG IN\"\n                    ></input>\n                </form>\n                <div>\n                    {\n                        isLoggedIn ?\n                            <Navigate to='/profile/'/>\n                    :\n                    <div id='no-user-logged-in-container'>\n                            <p>{errorMessage}</p>\n                            <Link to=\"/register\">Sign Up!</Link>\n                    </div>\n                    }\n                </div>\n            </section>\n        </section>\n\n    )\n}\n\nexport default LogIn;"],"mappings":"kgBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,CAAmBC,IAAnB,KAA+B,kBAA/B,CACA,OAASC,SAAT,KAA0B,QAA1B,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,MAA2G,IAAxGC,SAAwG,MAAxGA,QAAwG,CAA9FC,WAA8F,MAA9FA,WAA8F,CAAjFC,QAAiF,MAAjFA,QAAiF,CAAvEC,WAAuE,MAAvEA,WAAuE,CAA1DC,cAA0D,MAA1DA,cAA0D,CAA1CC,QAA0C,MAA1CA,QAA0C,CAAhCC,UAAgC,MAAhCA,UAAgC,CAApBC,aAAoB,MAApBA,aAAoB,CAGrH,cAAwCZ,QAAQ,CAAC,EAAD,CAAhD,wCAAOa,YAAP,eAAqBC,eAArB,eAIA,GAAMC,UAAS,6FAAG,iBAAOC,GAAP,+IACdA,GAAG,CAACC,cAAJ,GACIC,eAFU,CAEQ,CAClBb,QAAQ,CAARA,QADkB,CAElBE,QAAQ,CAARA,QAFkB,CAFR,uBAMOJ,UAAS,CAACE,QAAD,CAAWE,QAAX,CANhB,QAMRY,MANQ,eAOV,GAAIA,MAAM,CAACC,OAAX,CAAoB,CAChBV,QAAQ,CAACS,MAAM,CAACE,IAAP,CAAYC,KAAb,CAAR,CACAb,cAAc,CAACS,eAAD,CAAd,CACAN,aAAa,CAACO,MAAM,CAACC,OAAR,CAAb,CACH,CAJD,IAIO,IAAI,CAACD,MAAM,CAACC,OAAZ,CAAqB,CACxBN,eAAe,CAACK,MAAM,CAACI,KAAP,CAAaC,OAAd,CAAf,CACAlB,WAAW,CAAC,EAAD,CAAX,CACAE,WAAW,CAAC,EAAD,CAAX,CACH,CAELiB,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAoCC,IAAI,CAACC,SAAL,CAAeV,eAAf,CAApC,EACAO,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAeT,MAAM,CAACE,IAAP,CAAYC,KAA3B,CAA9B,EAlBc,sDAAH,kBAATP,UAAS,6CAAf,CA2BA,mBACI,gBAAS,EAAE,CAAC,eAAZ,uBACI,iBAAS,EAAE,CAAC,YAAZ,wBAAyB,8BAAzB,cACI,cACI,EAAE,CAAC,aADP,CAEI,QAAQ,CAAEA,SAFd,wBAII,cACI,IAAI,CAAC,MADT,CAEI,QAAQ,KAFZ,CAGI,KAAK,CAAEV,QAHX,CAII,EAAE,CAAC,UAJP,CAKI,WAAW,CAAC,WALhB,CAMI,QAAQ,CAAE,kBAACW,GAAD,QAASV,YAAW,CAACU,GAAG,CAACa,MAAJ,CAAWC,KAAZ,CAApB,EANd,EAJJ,cAYI,cACI,IAAI,CAAC,UADT,CAEI,QAAQ,KAFZ,CAGI,KAAK,CAAEvB,QAHX,CAII,EAAE,CAAC,UAJP,CAKI,WAAW,CAAC,WALhB,CAMI,QAAQ,CAAE,kBAACS,GAAD,QAASR,YAAW,CAACQ,GAAG,CAACa,MAAJ,CAAWC,KAAZ,CAApB,EANd,EAZJ,cAoBI,cACI,IAAI,CAAC,QADT,CAEI,KAAK,CAAC,QAFV,EApBJ,GADJ,cA0BI,qBAEQnB,UAAU,cACN,KAAC,QAAD,EAAU,EAAE,CAAC,WAAb,EADM,cAGd,aAAK,EAAE,CAAC,6BAAR,wBACQ,mBAAIE,YAAJ,EADR,cAEQ,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,sBAFR,GALJ,EA1BJ,GADJ,EADJ,CA2CH,CA7ED,CA+EA,cAAeT,MAAf"},"metadata":{},"sourceType":"module"}