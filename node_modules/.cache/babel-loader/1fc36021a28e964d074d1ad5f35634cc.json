{"ast":null,"code":"import _regeneratorRuntime from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useParams}from'react-router-dom';import{fetchAllPosts,patchEdit}from\"../api\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var EditPost=function EditPost(_ref){var isLoggedIn=_ref.isLoggedIn,username=_ref.username,token=_ref.token;var _useParams=useParams(),postId=_useParams.postId;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),description=_useState4[0],setDescription=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState('[On Request]'),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),willDeliver=_useState10[0],setWillDeliver=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),postList=_useState12[0],setPostList=_useState12[1];useEffect(function(){var returnedPosts=[];var getPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetchAllPosts(token);case 2:returnedPosts=_context.sent;setPostList(returnedPosts);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getPosts(){return _ref2.apply(this,arguments);};}();getPosts();postList.map(function(eachPost){var eachpostid=\":\"+eachPost._id;if(eachpostid===postId){setTitle(eachPost.title);setDescription(eachPost.description);setPrice(eachPost.price);setLocation(eachPost.location);setWillDeliver(eachPost.willDeliver);}});},[postList]);var submitEdits=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(evt){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:evt.preventDefault();console.log(token,title,description,price,location,willDeliver);// const result = await patchEdit(postId, token, title, description, price, location, willDeliver)\ncase 2:case\"end\":return _context2.stop();}}},_callee2);}));return function submitEdits(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{id:\"edit-post-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Edit Post \",postId,\" \"]}),/*#__PURE__*/_jsxs(\"form\",{id:\"edit-post-form\",onSubmit:submitEdits,children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Title: \",title]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:title,onChange:function onChange(evt){return setTitle(evt.target.value);}}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Description: \",description]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:description,onChange:function onChange(evt){return setDescription(evt.target.value);}}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Price: \",price]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:price?price:'not provided',onChange:function onChange(evt){return setPrice(evt.target.value);}}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Location: \",location]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:location?location:'not provided',onChange:function onChange(evt){return setLocation(evt.target.value);}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Willing to Deliver?\"}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:willDeliver,id:\"willdeliverycheckbox\",onChange:function onChange(evt){return setWillDeliver(!willDeliver);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",disabled:isLoggedIn?false:true,value:\"Edit Post\"})]})]});};export default EditPost;","map":{"version":3,"names":["React","useState","useEffect","useParams","fetchAllPosts","patchEdit","EditPost","isLoggedIn","username","token","postId","title","setTitle","description","setDescription","price","setPrice","location","setLocation","willDeliver","setWillDeliver","postList","setPostList","returnedPosts","getPosts","map","eachPost","eachpostid","_id","submitEdits","evt","preventDefault","console","log","target","value"],"sources":["/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/src/components/EditPost.js"],"sourcesContent":["import React, { useState, useEffect }from \"react\";\nimport { useParams} from 'react-router-dom';\nimport { fetchAllPosts, patchEdit } from \"../api\";\n\n\n\nconst EditPost = ({ isLoggedIn, username, token }) => {\n    const { postId } = useParams();\n\n    const [title, setTitle] = useState('')\n    const [description, setDescription] = useState('')\n    const [price, setPrice] = useState('')\n    const [location, setLocation] = useState('[On Request]')\n    const [willDeliver, setWillDeliver]= useState(false)\n    const [postList, setPostList] = useState([])\n\n    useEffect(() =>  {\n        let returnedPosts= []\n        \n        const getPosts = async () => {\n            returnedPosts = await fetchAllPosts(token);\n            setPostList(returnedPosts);\n        }\n        getPosts()\n\n        postList.map((eachPost) => {\n                        \n            let eachpostid = \":\" + eachPost._id\n            if (eachpostid === postId) {\n                setTitle(eachPost.title);\n                setDescription(eachPost.description)\n                setPrice(eachPost.price)\n                setLocation(eachPost.location)\n                setWillDeliver(eachPost.willDeliver)\n            }\n        })\n    \n    },[postList])\n\n    const submitEdits = async (evt) => {\n        evt.preventDefault();\n            console.log(token, title, description, price, location, willDeliver)\n        // const result = await patchEdit(postId, token, title, description, price, location, willDeliver)\n    }\n    \n\n    return (\n        \n        <section id='edit-post-container'>\n\n            \n\n\n            <h1>Edit Post {postId} </h1>\n\n                <form\n                    id='edit-post-form'\n                    onSubmit={submitEdits}\n                >\n                    <label className='form-label'>Title: {title}</label>\n                    <input\n                        type='text'\n                        placeholder={title}\n                        onChange={(evt) => setTitle(evt.target.value)}\n                    >\n                    </input>\n                    <label className='form-label'>Description: {description}</label>\n                    <input\n                        type='text'\n                        placeholder={description}\n                        onChange={(evt) => setDescription(evt.target.value)}\n                    >\n                    </input>\n                    <label className='form-label'>Price: {price}</label>\n                    <input\n                        type='text'\n                        placeholder={price ? price : 'not provided'}\n                        onChange={(evt) => setPrice(evt.target.value)}\n                    >\n                    </input>\n                    <label className='form-label'>Location: {location}</label>\n                    <input\n                        type='text'\n                        placeholder={location ? location : 'not provided'}\n                        onChange={(evt) => setLocation(evt.target.value)}\n                    >\n                    </input>\n                    <label className='form-label'>Willing to Deliver?</label>\n                    <input\n                        type='checkbox'\n                        checked={willDeliver}\n                        id=\"willdeliverycheckbox\"\n                        onChange={(evt) => setWillDeliver(!willDeliver)}\n                    >\n                    </input>\n                    <input\n                        type=\"submit\"\n                        disabled= {isLoggedIn ? false : true}\n                        value=\"Edit Post\"\n                    >\n                    </input>\n                </form>\n            \n        </section>\n    )\n}\n\n\n\nexport default EditPost;"],"mappings":"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"},"metadata":{},"sourceType":"module"}