{"ast":null,"code":"import _slicedToArray from\"/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import ReactDOM from\"react-dom\";import{BrowserRouter as Router,Routes,Route,Link}from\"react-router-dom\";import{Homepage,Posts,Profile,LogIn,RegisterForm,ErrorMessage,AddPost,EditPost,AddMessage}from\"./components\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),username=_useState4[0],setUsername=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),token=_useState8[0],setToken=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isLoggedIn=_useState10[0],setIsLoggedIn=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),postList=_useState12[0],setPostList=_useState12[1];useEffect(function(){var tokenCheck=function tokenCheck(){if(localStorage.token){setIsLoggedIn(true);setToken(JSON.parse(localStorage.token));}else{console.log(\"isloggedin: \",isLoggedIn);}};tokenCheck();var userFromLocalStorage=localStorage.getItem('currentUser');userFromLocalStorage?setCurrentUser(JSON.parse(userFromLocalStorage)):null;setUsername(currentUser.username);},[isLoggedIn]);return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(\"header\",{id:\"main-header\",children:/*#__PURE__*/_jsx(\"img\",{id:\"header-logo\",src:\"https://i.ibb.co/kgV1QJ7/Screen-Shot-2022-07-26-at-8-51-19-AM.png\",alt:\"Stranger's Things\"})}),/*#__PURE__*/_jsxs(\"navbar\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/posts\",children:\"Posts\"}),isLoggedIn?/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/profile/\",children:\"Profile\"}):null,!isLoggedIn?/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/log-in/\",children:\"Log In\"}):/*#__PURE__*/_jsx(Link,{className:\"nav-link\",to:\"/\",onClick:function onClick(evt){evt.preventDefault();localStorage.removeItem('currentUser');localStorage.removeItem('token');setUsername('');setPassword('');setCurrentUser({});setToken('');setIsLoggedIn(false);},children:\" Log Out\"})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Homepage,{isLoggedIn:isLoggedIn,currentUser:currentUser})}),/*#__PURE__*/_jsx(Route,{path:\"/posts\",element:/*#__PURE__*/_jsx(Posts,{isLoggedIn:isLoggedIn,token:token,username:username,currentUser:currentUser,postList:postList,setPostList:setPostList})}),/*#__PURE__*/_jsx(Route,{path:\"/profile/\",element:/*#__PURE__*/_jsx(Profile,{isLoggedIn:isLoggedIn,token:token,setToken:token,username:username,currentUser:currentUser})}),/*#__PURE__*/_jsx(Route,{path:\"/log-in/\",element:/*#__PURE__*/_jsx(LogIn,{currentUser:currentUser,setCurrentUser:setCurrentUser,username:username,setUsername:setUsername,password:password,setPassword:setPassword,token:token,setToken:setToken,isLoggedIn:isLoggedIn,setIsLoggedIn:setIsLoggedIn})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(ErrorMessage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(RegisterForm,{currentUser:currentUser,setCurrentUser:setCurrentUser,username:username,setUsername:setUsername,password:password,setPassword:setPassword,token:token,setToken:setToken})}),/*#__PURE__*/_jsx(Route,{path:\"/add-post\",element:/*#__PURE__*/_jsx(AddPost,{isLoggedIn:isLoggedIn,currentUser:currentUser,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/edit-post/:postId\",element:/*#__PURE__*/_jsx(EditPost,{isLoggedIn:isLoggedIn,currentUser:currentUser,token:token})}),/*#__PURE__*/_jsx(Route,{path:\"/add-message/:postId\",element:/*#__PURE__*/_jsx(AddMessage,{isLoggedIn:isLoggedIn,username:username,token:token})})]})]})});};var appElement=document.getElementById('app');var root=ReactDOM.createRoot(appElement);root.render(/*#__PURE__*/_jsx(App,{}));","map":{"version":3,"names":["React","useEffect","useState","ReactDOM","BrowserRouter","Router","Routes","Route","Link","Homepage","Posts","Profile","LogIn","RegisterForm","ErrorMessage","AddPost","EditPost","AddMessage","App","currentUser","setCurrentUser","username","setUsername","password","setPassword","token","setToken","isLoggedIn","setIsLoggedIn","postList","setPostList","tokenCheck","localStorage","JSON","parse","console","log","userFromLocalStorage","getItem","evt","preventDefault","removeItem","appElement","document","getElementById","root","createRoot","render"],"sources":["/Users/helby1/Desktop/FULL STACK ACADEMY/Course_Work/project_09/Strangers Things/src/index.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ReactDOM  from \"react-dom\";\nimport { BrowserRouter as Router, Routes, Route, Link } from \"react-router-dom\";\n\nimport { \n        Homepage,\n        Posts,\n        Profile,\n        LogIn,\n        RegisterForm,\n        ErrorMessage,\n        AddPost,\n        EditPost,\n        AddMessage\n        } from \"./components\";\n\n\n\nconst App= () => {\n\n    const [currentUser, setCurrentUser] = useState({});\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [token, setToken] = useState('');\n    const [isLoggedIn, setIsLoggedIn] = useState(false)\n    const [postList, setPostList] = useState([])\n    \n\n    useEffect(() => {\n        const tokenCheck = () => {\n            \n            if (localStorage.token) {\n              setIsLoggedIn(true)\n              setToken(JSON.parse(localStorage.token))\n            } else {\n                console.log(\"isloggedin: \", isLoggedIn)\n            }\n\n            }\n        \n        tokenCheck();\n        \n        const userFromLocalStorage = localStorage.getItem('currentUser');\n        userFromLocalStorage ? \n                setCurrentUser(JSON.parse(userFromLocalStorage))\n                :\n                null\n        setUsername(currentUser.username)\n    }, [isLoggedIn])\n    \n    return (\n        <div className='app'>\n            <Router>\n                <header id='main-header'>\n                <img id=\"header-logo\" src=\"https://i.ibb.co/kgV1QJ7/Screen-Shot-2022-07-26-at-8-51-19-AM.png\" alt=\"Stranger's Things\"></img>\n                </header>\n                <navbar className=\"navbar\">\n                    <Link className=\"nav-link\" to=\"/\">Home</Link>\n                    <Link className=\"nav-link\" to=\"/posts\">Posts</Link>\n                    { isLoggedIn ? <Link className=\"nav-link\" to=\"/profile/\">Profile</Link> : null}\n                    {\n                        !isLoggedIn  ?\n                            <Link className=\"nav-link\" to=\"/log-in/\">Log In</Link>\n                            :\n                            <Link className=\"nav-link\" to=\"/\"\n                                  onClick={(evt) => {\n                                    evt.preventDefault();\n                                    localStorage.removeItem('currentUser')\n                                    localStorage.removeItem('token')\n                                    setUsername('')\n                                    setPassword('')\n                                    setCurrentUser({})\n                                    setToken('')\n                                    setIsLoggedIn(false);\n                                    \n                                }}> Log Out\n                            </Link>\n                    }\n                \n                    \n                </navbar>\n                \n                <Routes>\n                    <Route path=\"/\" \n                            element={<Homepage\n                                isLoggedIn={isLoggedIn}\n                                currentUser={currentUser}\n                            /> }\n                    />\n                    <Route path=\"/posts\" \n                            element={<Posts \n                                isLoggedIn={isLoggedIn}\n                                token={token}\n                                username={username}\n                                currentUser={currentUser}\n                                postList={postList}\n                                setPostList={setPostList}\n                            />} \n                    /> \n                    <Route path=\"/profile/\" \n                            element={<Profile\n                                isLoggedIn={isLoggedIn} \n                                token={token}\n                                setToken={token}\n                                username={username}\n                                currentUser={currentUser}\n                                />}\n                    /> \n                    <Route path=\"/log-in/\"\n                            element={<LogIn \n                                currentUser={currentUser} setCurrentUser={setCurrentUser}\n                                username={username} setUsername={setUsername}\n                                password={password} setPassword={setPassword}\n                                token={token} setToken={setToken}\n                                isLoggedIn={isLoggedIn} setIsLoggedIn={setIsLoggedIn}\n                                />}\n                    />        \n                    <Route path=\"/*\" element={<ErrorMessage />}/>  \n                    <Route path=\"/register\" \n                            element={<RegisterForm \n                                currentUser={currentUser} setCurrentUser={setCurrentUser}\n                                username={username} setUsername={setUsername}\n                                password={password} setPassword={setPassword}\n                                token={token} setToken={setToken}\n                                />}\n                    />\n                    <Route path=\"/add-post\"\n                             element={<AddPost \n                                isLoggedIn={isLoggedIn}\n                                currentUser={currentUser}\n                                token={token}/>}\n                    />\n                    <Route path='/edit-post/:postId'\n                             element={<EditPost \n                                isLoggedIn={isLoggedIn}\n                                currentUser={currentUser}\n                                token={token}\n                            />}    \n                    />\n                    <Route path='/add-message/:postId'\n                            element={<AddMessage\n                                isLoggedIn={isLoggedIn}\n                                username={username}\n                                token = {token}\n                            />}\n                    />     \n                </Routes>\n            </Router>\n        </div>\n    )\n}\n\nconst appElement = document.getElementById('app');\nconst root = ReactDOM.createRoot(appElement);\nroot.render(<App />)"],"mappings":"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"},"metadata":{},"sourceType":"module"}